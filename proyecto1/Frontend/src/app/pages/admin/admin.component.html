<app-navegacion></app-navegacion>
<h2>Administraci√≥n productos</h2>
<article class="nuevo-producto">
  <h5>Agregar nuevo producto:</h5>
  <button type="button" class="border-0">
    <i class="bi bi-bag-plus-fill h3" (click)="showCreateProductForm(true)"></i>
  </button>
</article>
<table class="blueTable">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Imagen</th>
      <th>Precio</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    @for(producto of allproducts; track $index){
    <tr>
      <td>{{ producto.nombre }}</td>
      <td>
        <img class="image" src="{{ producto.imagen }}" alt="imagen" />
      </td>
      <td>${{ producto.precio }}</td>
      <td class="iconos">
        <button type="button" class="border-0">
          <i
            class="bi bi-pencil-square h3"
            (click)="
              showEditProductform(
                producto.nombre,
                producto.imagen,
                producto.precio,
                producto._id
              )
            "
          ></i>
        </button>
        |
        <button type="button" class="border-0">
          <i
            class="bi bi-trash-fill h3 text-danger"
            (click)="confirmDelete(producto._id)"
          ></i>
        </button>
      </td>
    </tr>
    }
  </tbody>
</table>
@if(isNewProduct) {
<section class="mx-2">
  @if(!isUpdateProduct){
  <h3>Nuevo Producto</h3>
  } @else {
  <h3>Editar Producto</h3>
  <input type="hidden" name="id" [(ngModel)]="id" />
  }
  <form class="row g-3 d-flex flex-column align-items-start">
    <div class="col-auto">
      <label for="nombre" class="">Nombre:</label>
      <input type="text" class="form-control" name="name" [(ngModel)]="name" />
    </div>
    <div class="col-auto">
      <label for="imagen" class="">Imagen:</label>
      <input
        type="text"
        class="form-control"
        name="imagen"
        [(ngModel)]="imagen"
      />
    </div>
    <div class="col-auto">
      <label for="Precio" class="">Precio:</label>
      <input
        type="text"
        class="form-control"
        name="price"
        [(ngModel)]="price"
      />
    </div>
    <div class="col-auto">
      @if (!isUpdateProduct) {
      <button
        type="button"
        (click)="createProduct()"
        class="btn btn-primary mb-3"
      >
        Crear
      </button>
      }@else{
      <button
        type="button"
        class="btn btn-primary mb-3"
        (click)="editProduct()"
      >
        Editar
      </button>
      }
      <button
        type="button"
        (click)="showCreateProductForm(false)"
        class="btn btn-danger mx-3 mb-3"
      >
        Cerrar
      </button>
    </div>
  </form>
</section>
}
<app-pie-pagina></app-pie-pagina>
